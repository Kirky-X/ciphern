[package]
name = "ciphern"
version = "0.1.0"
edition = "2021"
authors = ["Kirky.X <Kirky-X@outlook.com>"]
description = "Enterprise-grade cryptographic library"

[dependencies]
# Core Crypto
ring = "0.17"
# Note: In a real scenario, use a specific version. 
# For this implementation, we use libsm for SM4 support.
libsm = "0.6"
gm-sm4 = "0.10"
aes-gcm = "0.10"
ghash = "0.5"
ctr = "0.9"
cipher = "0.4"
sm4 = "0.5"
argon2 = "0.5"
pbkdf2 = { version = "0.12", features = ["simple"] }

# Memory Protection
zeroize = { version = "1.7", features = ["derive", "zeroize_derive"] }
libc = "0.2" # For mlock
libloading = "0.8" # For dynamic plugin loading

# Randomness
rand = { version = "0.8", features = ["small_rng"] }
rand_chacha = "0.3"
getrandom = "0.2"

# Statistical Tests
statistical = "1.0"

# Cryptographic Hash Functions
sha2 = "0.10"
hmac = "0.12"
rsa = "0.9"
pkcs8 = "0.10"

# JNI Support
jni = "0.21"
# Python Support
pyo3 = { version = "0.20", features = ["extension-module"] }

# Serialization & Logging
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
log = "0.4"
prometheus = "0.13"
thiserror = "1.0"
hex = "0.4"
chrono = { version = "0.4", features = ["serde"] }
lazy_static = "1.4"
subtle = "2.5" # Constant-time comparison
uuid = { version = "1.0", features = ["v4", "serde"] }

[dev-dependencies]
criterion = { version = "0.5", features = ["html_reports"] }

[features]
default = ["std", "fips", "hash", "encrypt", "kdf"]
std = []
fips = []
hash = []
encrypt = []
kdf = ["encrypt"]

[[test]]
name = "api_communication_uat"
path = "tests/uat/api_communication_uat.rs"

[[test]]
name = "key_rotation_uat"
path = "tests/uat/key_rotation_uat.rs"

[[test]]
name = "multi_tenant_isolation_uat"
path = "tests/uat/multi_tenant_isolation_uat.rs"

[[test]]
name = "countermeasure_stats_test"
path = "tests/unit/countermeasure_stats_test.rs"

[[test]]
name = "signature_test"
path = "tests/unit/signature_test.rs"

[[test]]
name = "key_test"
path = "tests/unit/key_test.rs"

[[test]]
name = "memory_protection_test"
path = "tests/unit/memory_protection_test.rs"

[[test]]
name = "api_latency_test"
path = "tests/performance/api_latency_test.rs"

[[test]]
name = "audit_log_uat"
path = "tests/uat/audit_log_uat.rs"

[[test]]
name = "debug_audit_log"
path = "tests/uat/debug_audit_log.rs"

[[test]]
name = "cavp_test"
path = "tests/fips/cavp_test.rs"

[[bench]]
name = "cipher_bench"
harness = false
